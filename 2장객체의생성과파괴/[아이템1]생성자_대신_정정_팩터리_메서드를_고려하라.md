<h1> 생성자 대신 정적 팩터리 메서드를 고려하라 </h1> 

<br><br> 
<b> 클래스는 생성자와 별도로 정적 팩터리 메서드 (static factory method) 를 제공할 수 있다.</b>

https://velog.io/@cjh8746/정적-팩토리-메서드Static-Factory-Method <br> 
정적 팩토리 메서드 관련 참고글 <br>

정적팩토리 메서드란 객체 생성의 역할을 하는 클래스 메서드라는 의미 <br> 

클래스는 클라이언트에 public 생성자 대신 정적 팩터리 메서드를 제공할 수 있다. <br> 

<h1>정적 팩터리 메서드의 장점 </h1>
<h3> 첫번째 이름을 가질 수 있다. </h3>

생성자에 넘기는 매개변수와 생성자 자체만으로는 반환될 객체의 특성을 제대로 설명하지 못한다.<br> 
생성자인 BigInteger(int, int, Random)보다 정적 팩터리 메서드인 <br> 
BigInteger.probablbPrime 중 소수인 BigInteger를 반환한다는 의미를 잘 설명한다.<br> 

<br><br> 
하나의 시그니처로는 생성자를 하나만 만들 수 있다. <br> 
입력 매개변수를의 순서를 다르게 한 생성자를 새로 추가하는 식으로 이 제한을 피해볼 수도 있지만 좋은 발상이 아니다.<br> 
가독성이 매우 저해된다. <br> 

* 자바 프로그래밍에서 시그니처란 메서드명과 파라미터의 순서, 타입, 개수를 의미한다. 
* 리턴타입과 exception은 메서드 시그니처가 아니다. 
* 정적 팻터리 메서드를 사용하면 시그니처가 같은 생성자를 여러개 만들고 이름을 바꾸면 된다.
 <br><br> 

<h3> 두번째 호출될 때마다 인스턴스를 새로 생성하지는 않아도 된다. </h3>
불변 클래스는 인스턴스를 미리 만들어 놓거나 새로 생성한 인스턴스를 캐싱하여 재활용하는 식으로 불필요한 객체 생성을 피할 수 있다. <br> 

* Immutable class(불변클래스 정리)
https://limkydev.tistory.com/68 <br>
Immutable class는 멤버변수가 final로 선언되었기 때문에 수정이 불가하고, <br> 
settr 접근메서드가 없기 때문에 기본적으로 변경시킬 수 있는 상황을 전부 막습니다.
<br><br>

* Flyweight 패턴
어떤 클래스의 인스턴스 한 개만 가지고 여러 개의 가상 인스턴스를 제공하고 싶을 때 사용하는 패턴 <br>
인스턴스를 가능한 대로 공유시켜 쓸데없이 new 연산자를 통한 메모리 낭비를 줄이는 방식 <br>

<br><br> 
반복되는 요청에 같은 객체를 반환하는 식으로 정적 팩터리 방식의 클래스는 언제 어느 인스턴스를 살아 있게 할지를 통제할 수 있다. <br> 

<br> 
<h3>세번째, 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다. </h3>
반환할 객체의 클래스를 자유롭게 선택할 수 있게 하는 '엄청난 유연성'을 선물한다. <br> 
반환하는 타입을 인터페이스 타입으로 할 경우 해당 인터페이스를 구현하는 다른 타입의 객체들을 반환할 수 있음을 말한다. (상속) <br> <br> 
![image](https://github.com/Yangyunhui454545/effectiveJava/assets/43237961/2f80b1db-343e-420c-be4f-e7d642ed841a)  
<br> 
특히 자바 컬렉션 프레임워크는 45개의 유틸리티 구현체를 제공하는데, 이 구현체 대부분을 단 하나의 인스턴스화 불가 클레스인 java.util.Collections에서 정적 팩터리 메서드를 통해 어도록 했다. <br> 
Collection을 상속받는 모든 타입의 인스턴스가 리턴될 수 있는 것이다. <br> 
API를 만들 때 이 유연성을 응용하면 구현 클래스를 공개하지 않고도 객체를 반환할 수 있어 API를 작게 유지할 수 있다.<br> 
<br><br> 
<h3>네 번째, 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.</h3>
<br><br> 
EnumSet 클래스는 public 생성자 없이 오직 정적 팩터리만 제공하는데,  <br> 
OpenJDK에서는 원소의 수에 따라 두 가지 하위 클래스 중 하나의 인스턴스를 반환한다. <br> 
<br> 

<h3>다섯번째, 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다. </h3>  
ex. 서비스 제공자 프레임워크 (ex. JDBC) <br> <br> 
이 구현체는 클라이언트에 제공하는 역할을 프레임워크가 통제하여, 클라이언트를 구현체로부터 분리해준다. <br> 
<br> <br> 
서비스 제공자 프레임워크는 3개의 핵심 컴포넌트로 이뤄진다. <br> 
서비스 인터페이스, 제공자 등록 API, 서비스 접근 API <br> 
https://devyongsik.tistory.com/294#recentEntries (참고 블로그) <br>  
 * 서비스 인터페이스 : 구현체의 동작을 정의 <br> 
 * 제공자 등록 API : 제공자가 구현체를 등록할 때 사용 <br> 
 * 서비스 접근 api : 클라이언트가 서비스의 인스턴스를 얻을 때 사용. 클라이언트는 원하는 구현체의 조건을 명시할 수 있다. <br>
  이 서비스 접근 API가 서비스 제공자 프레임워크의 근간이라고 한 유연한 정적 팩터리의 실체이다. <br> 
 * 서비스 제공자 인터페이스 : 서비스 인터페이스의 인스턴스를 생성하는 팩터리 객체를 설명한다. <br> 
<br><br> 
<b>JDBC 예시 </b>
* 서비스 인터페이스 : Connection <br> 
* 제공자 등록 API : DriverManager.registerDrive() <br> 
* 서비스 접근 API : DriverManager.getConnection() <br> 
* 서비스 제공자 인터페이스 : Driver <br> 
<br><br> 
이를 활용하여 JDBC라는 서비스의 규칙을 지킨 (Connection 인터페이스를 구현한 db 라이브러리) 여러 DB를 사용가능하게 된다. <br> 

